<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kobook.mappers.myPageMapper">

	<!-- 판매내역 리스트 -->
	<select id="sellList" resultType="BookVO" parameterType="int">
		select *
		from book
		where person_id = #{person_id}
	</select>

	<!-- 판매상태 업데이트 -->
	<update id="sellStateUpdate" parameterType="BookVO">
		update book
		set
		book_sell_state = #{book_sell_state}
		where book_id = #{book_id}
	</update>

	<!-- 구매내역 리스트 -->
	<select id="buyList" resultType="hashMap" parameterType="int">
		select
		b.book_img, b.book_name, p.pay_amount,o.order_date
		from book_order o,
		book b, pay p
		where o.order_id = p.order_id
		and o.book_id = b.book_id
		and o.person_id = #{person_id}
	</select>

	<!-- 찜리 -->
	<select id="pickList" resultType="hashMap" parameterType="int">
		select
		b.book_img,b.book_name,b.book_m_price,b.book_sell_state
		from book b,
		pick p , person person
		where b.book_id = p.book_id
		and p.person_id =
		person.person_id
		and p.pick_state = 'Y'
		and person.person_id = #{person_id}
	</select>

	<!-- 찜 상태 변경 -->
	<update id="pickUpdate" parameterType="int">
		update pick
		set pick_state = 'N'
		where pick_id = #{pick_id}
	</update>



</mapper>